---
layout: default
title: SEO Анализатор страниц
description: Анализ SEO-параметров страниц с новыми метриками
---

<style>
  /* Существующие стили остаются без изменений */
  /* Добавляем только новые стили для метрик */

  .seo-metrics {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 1.5rem;
    margin-top: 2rem;
  }

  .metric-card {
    background: white;
    border-radius: var(--border-radius);
    padding: 1.5rem;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
    border-left: 3px solid var(--primary-color);
  }

  .metric-title {
    font-size: 1.4rem;
    color: var(--gray-dark);
    margin-bottom: 1rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .metric-value {
    font-size: 1.8rem;
    font-weight: 700;
    color: var(--dark-color);
  }

  .metric-good { color: var(--success-color); }
  .metric-warning { color: var(--warning-color); }
  .metric-bad { color: var(--danger-color); }

  .metric-icon {
    width: 20px;
    height: 20px;
    stroke-width: 2;
  }

  .metric-details {
    font-size: 1.3rem;
    color: var(--gray-dark);
    margin-top: 0.5rem;
    line-height: 1.5;
  }

  @media (max-width: 768px) {
    .seo-metrics {
      grid-template-columns: 1fr;
    }
  }
</style>

<section class="hero" id="hero">
  <div id="app" class="container">
    <!-- Существующая форма без изменений -->
    <h1>SEO Анализатор страниц</h1>
    <p>Введите URL страниц для анализа (каждый URL с новой строки)</p>
    
    <form id="urlForm" class="seo-analysis">
      <div class="form__group">
        <textarea name="urls" id="urls" placeholder="https://example.com" 
                  class="form__input" rows="5" required></textarea>
        <label for="urls" class="form__label">URL страниц</label>
      </div>
      
      <div class="form__group">
        <input type="text" name="keyword" id="keyword" placeholder="Ключевая фраза" 
               class="form__input">
        <label for="keyword" class="form__label">Ключевая фраза (необязательно)</label>
      </div>
      
      <button type="submit" class="button button--primary">Анализировать</button>
      
      <div id="formMessage" style="display: none;"></div>
    </form>
    
    <div id="results" class="seo-analysis" style="display: none;">
      <h2>Результаты анализа</h2>
      <div id="resultsContent"></div>
    </div>
  </div>

  <div class="loading-overlay" id="loadingOverlay">
    <div class="spinner"></div>
    <p>Идет анализ страниц...</p>
    <p id="progressText">Обрабатывается: 0 из 0</p>
  </div>
</section>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  // Существующие функции без изменений
  document.getElementById('urlForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    // ... существующий код отправки запроса ...
  });

  function showMessage(text, type) {
    // ... существующий код ...
  }

  function truncate(text, maxLength) {
    // ... существующий код ...
  }

  function formatContentLength(length) {
    // ... существующий код ...
  }

  // Обновленная функция displayResults с новыми метриками
  function displayResults(data, keyword) {
    const resultsContainer = document.getElementById('results');
    const resultsContent = document.getElementById('resultsContent');
    
    resultsContainer.style.display = 'block';
    resultsContent.innerHTML = '';
    
    if (!Array.isArray(data)) {
      resultsContent.innerHTML = `<div class="error-message">Ошибка данных</div>`;
      return;
    }
    
    data.forEach((item, index) => {
      const isError = item.error || item.status >= 400;
      const card = document.createElement('div');
      card.className = `result-card ${isError ? 'error' : ''}`;
      
      card.innerHTML = `
        <div class="result-header">
          <div class="result-url">${item.url}</div>
          <div class="result-status ${isError ? 'error' : ''}">
            ${isError ? 'Ошибка' : `Статус: ${item.status}`}
          </div>
        </div>
      `;
      
      if (!isError) {
        // Новые метрики
        card.innerHTML += `
          <div class="seo-metrics">
            <!-- Анализ URL -->
            <div class="metric-card">
              <div class="metric-title">
                <svg class="metric-icon" viewBox="0 0 24 24">
                  <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
                  <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
                </svg>
                Анализ URL
              </div>
              <div class="metric-value ${item.urlAnalysis.length > 60 ? 'metric-bad' : 'metric-good'}">
                ${item.urlAnalysis.length} симв.
              </div>
              <div class="metric-details">
                ${item.urlAnalysis.isDynamic ? '❌ Динамический URL' : '✅ ЧПУ URL'}<br>
                ${item.urlAnalysis.hasKeyword ? '✅ Ключ. слово есть' : '❌ Ключ. слова нет'}
              </div>
            </div>

            <!-- Скорость загрузки -->
            <div class="metric-card">
              <div class="metric-title">
                <svg class="metric-icon" viewBox="0 0 24 24">
                  <circle cx="12" cy="12" r="10"></circle>
                  <polyline points="12 6 12 12 16 14"></polyline>
                </svg>
                Скорость загрузки
              </div>
              <div class="metric-value ${item.loadTime > 2000 ? 'metric-bad' : item.loadTime > 1000 ? 'metric-warning' : 'metric-good'}">
                ${item.loadTime} мс
              </div>
              <div class="metric-details">
                ${item.loadTime > 2000 ? '⚠️ Требуется оптимизация' : '✅ В норме'}
              </div>
            </div>

            <!-- Анализ контента -->
            <div class="metric-card">
              <div class="metric-title">
                <svg class="metric-icon" viewBox="0 0 24 24">
                  <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                </svg>
                Контент
              </div>
              <div class="metric-value ${item.contentAnalysis.length < 1500 ? 'metric-bad' : item.contentAnalysis.length < 2500 ? 'metric-warning' : 'metric-good'}">
                ${item.contentAnalysis.length} симв.
              </div>
              <div class="metric-details">
                Соотношение текст/код: ${item.contentAnalysis.textToCodeRatio}%<br>
                ${item.contentAnalysis.length < 1500 ? '❌ Мало текста' : '✅ Достаточно'}
              </div>
            </div>
          </div>

          <!-- Существующие данные -->
          <div class="result-meta">
            <div class="meta-item">
              <span class="meta-label">Title</span>
              <span class="meta-value">${truncate(item.title, 50)}</span>
            </div>
            <div class="meta-item">
              <span class="meta-label">H1</span>
              <span class="meta-value">${truncate(item.h1, 30)}</span>
            </div>
            ${keyword ? `
              <div class="meta-item">
                <span class="meta-label">Ключевая фраза</span>
                <span class="meta-value">
                  ${item.keywordStats.exactCount + item.keywordStats.partialCount} вхождений
                </span>
              </div>
            ` : ''}
          </div>
        `;
      } else {
        card.innerHTML += `<div class="error-message">${item.error}</div>`;
      }
      
      resultsContent.appendChild(card);
    });
    
    // Существующий код для графиков
    if (keyword && data.length > 1 && data.every(item => !item.error)) {
      resultsContent.innerHTML += createComparisonCharts(data, keyword);
    }
  }

  // Остальные существующие функции
  function createComparisonCharts(data, keyword) {
    // ... существующий код ...
  }

  function updateProgress(current, total) {
    // ... существующий код ...
  }
</script>