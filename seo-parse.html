---
layout: default
title: SEO Анализатор
description: Анализ SEO-параметров страниц
---

<style>
  /* Стили для новых метрик */
  .seo-metrics {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 1.5rem;
    margin-top: 2rem;
  }

  .metric-card {
    background: white;
    border-radius: 8px;
    padding: 1.5rem;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
    border-left: 3px solid #4361ee;
  }

  .metric-title {
    font-size: 1.4rem;
    color: #495057;
    margin-bottom: 1rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .metric-value {
    font-size: 1.8rem;
    font-weight: 700;
    color: #14213d;
  }

  .metric-good { color: #4cc9f0; }
  .metric-warning { color: #f8961e; }
  .metric-bad { color: #ef233c; }

  .metric-icon {
    width: 20px;
    height: 20px;
    stroke-width: 2;
  }

  @media (max-width: 768px) {
    .seo-metrics {
      grid-template-columns: 1fr;
    }
  }
</style>

<section class="hero" id="hero">
  <div class="container">
    <h1>SEO Анализатор</h1>
    <p>Анализ страниц по URL с новыми метриками</p>
    
    <form id="urlForm" class="seo-analysis">
      <div class="form__group">
        <textarea name="urls" id="urls" class="form__input" rows="5" required 
                  placeholder="https://example.com&#10;https://example.org"></textarea>
        <label for="urls" class="form__label">URL страниц (по одному на строку)</label>
      </div>
      
      <div class="form__group">
        <input type="text" name="keyword" id="keyword" class="form__input" 
               placeholder="Ключевая фраза">
        <label for="keyword" class="form__label">Ключевая фраза (необязательно)</label>
      </div>
      
      <button type="submit" class="button button--primary">Анализировать</button>
    </form>
    
    <div id="results" style="display: none; margin-top: 3rem;">
      <h2>Результаты</h2>
      <div id="resultsContent"></div>
    </div>
  </div>

  <div id="loadingOverlay" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(255,255,255,0.8); justify-content: center; align-items: center; flex-direction: column; z-index: 1000;">
    <div style="width: 50px; height: 50px; border: 5px solid #e9ecef; border-top-color: #4361ee; border-radius: 50%; animation: spin 1s linear infinite;"></div>
    <p style="margin-top: 1.5rem;">Идет анализ...</p>
  </div>
</section>

<script>
  document.getElementById('urlForm').addEventListener('submit', async function(e) {
    e.preventDefault();
    
    const urls = e.target.urls.value.split('\n')
      .map(url => url.trim())
      .filter(url => url.length > 0);
    
    if (urls.length === 0) {
      alert('Введите хотя бы один URL');
      return;
    }

    const keyword = e.target.keyword.value.trim();
    const loadingOverlay = document.getElementById('loadingOverlay');
    
    loadingOverlay.style.display = 'flex';
    
    try {
      const response = await fetch('https://seoparse.netlify.app/.netlify/functions/hello', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ urls, keyword })
      });
      
      if (!response.ok) throw new Error('Ошибка сервера');
      
      const data = await response.json();
      showResults(data, keyword);
    } catch (error) {
      alert('Ошибка: ' + error.message);
    } finally {
      loadingOverlay.style.display = 'none';
    }
  });

  function showResults(data, keyword) {
    const results = document.getElementById('results');
    const content = document.getElementById('resultsContent');
    
    results.style.display = 'block';
    content.innerHTML = '';
    
    data.forEach(item => {
      const card = document.createElement('div');
      card.className = 'seo-analysis';
      card.style.marginBottom = '2rem';
      
      card.innerHTML = `
        <h3>${item.url}</h3>
        ${item.error ? `
          <div style="color: #ef233c; padding: 1rem; background: rgba(239,35,60,0.1); border-radius: 4px;">
            ${item.error}
          </div>
        ` : `
          <div class="seo-metrics">
            <div class="metric-card">
              <div class="metric-title">
                <svg class="metric-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                  <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
                  <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
                </svg>
                URL Анализ
              </div>
              <div class="metric-value ${item.urlAnalysis.length > 60 ? 'metric-bad' : 'metric-good'}">
                ${item.urlAnalysis.length} симв.
              </div>
              <div style="margin-top: 0.5rem; font-size: 1.3rem; color: #495057;">
                ${item.urlAnalysis.isDynamic ? '❌ Динамический' : '✅ ЧПУ'}
                ${item.urlAnalysis.hasKeyword ? '· ✅ Ключ. слово' : ''}
              </div>
            </div>

            <div class="metric-card">
              <div class="metric-title">
                <svg class="metric-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                  <circle cx="12" cy="12" r="10"></circle>
                  <polyline points="12 6 12 12 16 14"></polyline>
                </svg>
                Скорость
              </div>
              <div class="metric-value ${item.loadTime > 2000 ? 'metric-bad' : item.loadTime > 1000 ? 'metric-warning' : 'metric-good'}">
                ${item.loadTime} мс
              </div>
            </div>

            <div class="metric-card">
              <div class="metric-title">
                <svg class="metric-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                  <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                </svg>
                Контент
              </div>
              <div class="metric-value ${item.contentAnalysis.length < 1500 ? 'metric-bad' : item.contentAnalysis.length < 2500 ? 'metric-warning' : 'metric-good'}">
                ${item.contentAnalysis.length} симв.
              </div>
              <div style="margin-top: 0.5rem; font-size: 1.3rem; color: #495057;">
                ${Math.round(item.contentAnalysis.textToCodeRatio)}% текста
              </div>
            </div>
          </div>

          <div style="margin-top: 1.5rem;">
            <p><strong>Title:</strong> ${item.title}</p>
            <p><strong>H1:</strong> ${item.h1}</p>
            ${keyword ? `<p><strong>Ключевая фраза:</strong> ${item.keywordStats.exactCount} точных вхождений</p>` : ''}
          </div>
        `}
      `;
      
      content.appendChild(card);
    });
  }
</script>